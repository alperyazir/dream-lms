# Story 2.1: Remove Chakra UI & Install Shadcn + Design System

**Epic:** Epic 2 - UI Migration & LMS Pages
**Dependencies:** Story 2.0 (✅ COMPLETED - migration guides created)
**Estimated Effort:** 2-3 days

---

## Status

**READY FOR PICKUP**

---

## Story

**As a** developer,
**I want** to replace Chakra UI with Shadcn UI + Tailwind and configure the neumorphic design system,
**so that** we have a clean foundation for Dream LMS's unique visual aesthetic.

---

## Acceptance Criteria

### 0. Prerequisites (Complete Before Starting)

**⚠️ CRITICAL: Read migration guides before touching any code!**

- [ ] Read `docs/chakra-to-shadcn-migration-guide.md` (15-20 minutes)
  - Component mapping table
  - Page-by-page migration checklists
  - Common pitfalls & solutions
  - 3-phase migration workflow
- [ ] Review screenshots in `docs/ss/` (5 minutes)
  - `login.png` - Current login page appearance
  - `dashboard.png` - Current dashboard layout
  - `admin.png` - Current admin table
  - `user_settings.png` - Current settings page
- [ ] Bookmark `docs/chakra-to-tailwind-quick-ref.md` for constant reference
  - Quick props translation table
  - Shadcn install commands
  - Testing checklist
- [ ] Understand Story 2.0 deliverables (completed by PM)
  - Migration guide with 5 page-specific checklists
  - Visual references to prevent regressions
  - Component inventory and analysis

**Why this matters:** Story 2.0 created comprehensive safety nets to prevent visual regressions and developer confusion. Skipping these guides will result in wasted time and inconsistent UI.

**Estimated prep time:** 25-30 minutes of reading before first line of code.

---

### Implementation Steps

1. Remove Chakra UI: `npm uninstall @chakra-ui/react @emotion/react @emotion/styled`
2. Install Shadcn: `npx shadcn-ui@latest init` with Tailwind + TypeScript
3. Configure `tailwind.config.ts` with Dream LMS color palette (Teal 500: #14B8A6, Cyan 500: #06B6D4, full scale)
4. Add neumorphic shadow utilities to Tailwind config (neuro-sm, neuro, neuro-lg)
5. Install core Shadcn components (20+): button, card, input, select, table, dialog, sheet, dropdown-menu, toast, form, etc.
6. Create design system file `src/lib/design-tokens.ts` with colors, spacing, typography
7. Configure dark mode with `next-themes` (already in template)
8. Update global CSS with Inter font, gradient backgrounds
9. All components work in light + dark mode
10. Document component usage in `/docs/components.md`

---

## Tasks / Subtasks

### Phase 1: Preparation (AC: 0)
- [ ] Read migration guide (15-20 min) (AC: 0)
- [ ] Review all screenshots in docs/ss/ (AC: 0)
- [ ] Bookmark quick reference guide (AC: 0)

### Phase 2: Remove Chakra (AC: 1)
- [ ] Run: `cd frontend && npm uninstall @chakra-ui/react @emotion/react @emotion/styled` (AC: 1)
- [ ] Delete `frontend/src/theme.tsx` file (AC: 1)
- [ ] Remove Chakra provider from `frontend/src/main.tsx` (AC: 1)
- [ ] Verify no Chakra imports remain: `grep -r "@chakra-ui" frontend/src` (AC: 1)
- [ ] Commit: "Remove Chakra UI dependencies" (AC: 1)

### Phase 3: Install Shadcn + Tailwind (AC: 2)
- [ ] Run: `cd frontend && npx shadcn-ui@latest init` (AC: 2)
  - [ ] Select: TypeScript ✓
  - [ ] Select: Tailwind CSS ✓
  - [ ] Configure base path: `src`
  - [ ] Select style: Default
  - [ ] Select color: Zinc (will customize later)
- [ ] Verify `tailwind.config.ts` created (AC: 2)
- [ ] Verify `components.json` created (AC: 2)
- [ ] Verify `src/components/ui/` directory exists (AC: 2)
- [ ] Commit: "Install Shadcn UI + Tailwind CSS" (AC: 2)

### Phase 4: Configure Design System (AC: 3, 4, 6)
- [ ] Update `tailwind.config.ts` with Dream LMS colors (AC: 3)
  - [ ] Add Teal 500: #14B8A6 as primary
  - [ ] Add Cyan 500: #06B6D4 as secondary
  - [ ] Add full Teal scale (50-950)
  - [ ] Add full Cyan scale (50-950)
- [ ] Add neumorphic shadow utilities to `tailwind.config.ts` (AC: 4)
  - [ ] `'neuro-sm': '2px 2px 4px rgba(0,0,0,0.2), -2px -2px 4px rgba(255,255,255,0.05)'`
  - [ ] `'neuro': '4px 4px 8px rgba(0,0,0,0.2), -4px -4px 8px rgba(255,255,255,0.05)'`
  - [ ] `'neuro-lg': '8px 8px 16px rgba(0,0,0,0.2), -8px -8px 16px rgba(255,255,255,0.05)'`
- [ ] Create `frontend/src/lib/design-tokens.ts` (AC: 6)
  - [ ] Export color palette object
  - [ ] Export spacing scale object
  - [ ] Export typography scale object
- [ ] Commit: "Configure Dream LMS design system (colors, shadows, tokens)" (AC: 3, 4, 6)

### Phase 5: Install Shadcn Components (AC: 5)
- [ ] Run: `npx shadcn-ui@latest add button` (AC: 5)
- [ ] Run: `npx shadcn-ui@latest add card` (AC: 5)
- [ ] Run: `npx shadcn-ui@latest add input` (AC: 5)
- [ ] Run: `npx shadcn-ui@latest add select` (AC: 5)
- [ ] Run: `npx shadcn-ui@latest add table` (AC: 5)
- [ ] Run: `npx shadcn-ui@latest add dialog` (AC: 5)
- [ ] Run: `npx shadcn-ui@latest add sheet` (AC: 5)
- [ ] Run: `npx shadcn-ui@latest add dropdown-menu` (AC: 5)
- [ ] Run: `npx shadcn-ui@latest add toast` (AC: 5)
- [ ] Run: `npx shadcn-ui@latest add form` (AC: 5)
- [ ] Run: `npx shadcn-ui@latest add badge` (AC: 5)
- [ ] Run: `npx shadcn-ui@latest add avatar` (AC: 5)
- [ ] Run: `npx shadcn-ui@latest add tabs` (AC: 5)
- [ ] Run: `npx shadcn-ui@latest add label` (AC: 5)
- [ ] Run: `npx shadcn-ui@latest add switch` (AC: 5)
- [ ] Run: `npx shadcn-ui@latest add textarea` (AC: 5)
- [ ] Run: `npx shadcn-ui@latest add alert` (AC: 5)
- [ ] Run: `npx shadcn-ui@latest add popover` (AC: 5)
- [ ] Run: `npx shadcn-ui@latest add separator` (AC: 5)
- [ ] Run: `npx shadcn-ui@latest add skeleton` (AC: 5)
- [ ] Verify all components installed in `src/components/ui/` (AC: 5)
- [ ] Commit: "Install 20+ core Shadcn UI components" (AC: 5)

### Phase 6: Dark Mode Configuration (AC: 7)
- [ ] Verify `next-themes` already installed in `package.json` (AC: 7)
- [ ] Update `frontend/src/main.tsx` to include ThemeProvider (AC: 7)
- [ ] Verify theme toggle component exists or create it (AC: 7)
- [ ] Test theme toggle switches between light/dark (AC: 7)
- [ ] Commit: "Configure dark mode with next-themes" (AC: 7)

### Phase 7: Global Styles (AC: 8)
- [ ] Add Inter font import to `frontend/src/styles/globals.css` (AC: 8)
  - [ ] `@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');`
- [ ] Update `globals.css` with font-family: 'Inter', sans-serif (AC: 8)
- [ ] Add gradient background utilities (AC: 8)
- [ ] Test fonts load correctly in browser (AC: 8)
- [ ] Commit: "Add Inter font and gradient backgrounds" (AC: 8)

### Phase 8: Testing (AC: 9)
- [ ] Start dev server: `npm run dev` (AC: 9)
- [ ] Test all Shadcn components render in light mode (AC: 9)
- [ ] Test all Shadcn components render in dark mode (AC: 9)
- [ ] Toggle dark mode and verify smooth transition (AC: 9)
- [ ] Verify no Chakra remnants: `grep -r "@chakra-ui" frontend/src` (AC: 9)
- [ ] Run build: `npm run build` - must succeed (AC: 9)
- [ ] Fix any build errors (AC: 9)

### Phase 9: Documentation (AC: 10)
- [ ] Create `docs/components.md` (AC: 10)
- [ ] Document all 20+ installed Shadcn components (AC: 10)
- [ ] Document usage examples for key components (AC: 10)
- [ ] Document neumorphic shadow usage (AC: 10)
- [ ] Document Dream LMS color palette (AC: 10)
- [ ] Commit: "Document Shadcn components and design system" (AC: 10)

---

## Dev Notes

### Architecture Context

**Source Documents:**
- `docs/architecture/tech-stack.md`
- `docs/architecture/source-tree.md`
- `docs/architecture/coding-standards.md`
- `docs/chakra-to-shadcn-migration-guide.md` (Story 2.0 deliverable)
- `docs/chakra-to-tailwind-quick-ref.md` (Story 2.0 deliverable)

**Frontend Stack (from tech-stack.md):**
- React 18.x → UI library
- Vite 5.x → Build tool (fast dev server)
- TypeScript 5.x → Type safety required
- **Tailwind CSS 3.x** → Styling (TO BE INSTALLED)
- **Shadcn UI (Latest)** → Component library (TO BE INSTALLED)
- TanStack Query 5.x → Server state (already installed)
- TanStack Router → File-based routing (already installed)
- React Hook Form 7.x → Form handling (already installed)
- Playwright → E2E testing (already installed)

**Current UI Framework (TO BE REMOVED):**
- ❌ Chakra UI v3.27.0 (will uninstall)
- ❌ @emotion/react 11.14.0 (will uninstall)
- ❌ @emotion/styled (will uninstall)

**Target UI Framework:**
- ✅ Shadcn UI (Radix UI primitives + Tailwind)
- ✅ Tailwind CSS 3.x (utility-first CSS)
- ✅ next-themes 0.4.6 (already installed for dark mode!)

### Source Tree (Frontend)

**Current structure (from source-tree.md):**
```
frontend/
├── src/
│   ├── main.tsx              # Entry point - UPDATE: remove Chakra provider
│   ├── theme.tsx             # DELETE THIS - Chakra theme file
│   │
│   ├── components/
│   │   ├── ui/              # Shadcn components will install HERE
│   │   │   ├── button.tsx   # Already exists (custom, keep!)
│   │   │   ├── field.tsx    # Already exists (custom, keep!)
│   │   │   ├── input-group.tsx # Already exists (custom, keep!)
│   │   │   ├── password-input.tsx # Already exists (custom, keep!)
│   │   │   ├── drawer.tsx   # Already exists (custom, keep!)
│   │   │   ├── pagination.tsx # Already exists (custom, keep!)
│   │   │   └── ... (20+ new Shadcn components)
│   │   ├── Common/          # Navbar, Sidebar (will migrate in Story 2.2)
│   │   ├── Admin/           # Admin components (will migrate in Story 2.2)
│   │   └── UserSettings/    # Settings components (will migrate in Story 2.2)
│   │
│   ├── lib/
│   │   └── design-tokens.ts # CREATE THIS - Dream LMS design tokens
│   │
│   ├── routes/              # Page components (will migrate in Story 2.2)
│   │   ├── login.tsx        # Uses Chakra (will migrate in 2.2)
│   │   ├── _layout/
│   │   │   ├── admin.tsx    # Uses Chakra (will migrate in 2.2)
│   │   │   └── settings.tsx # Uses Chakra (will migrate in 2.2)
│   │   └── ...
│   │
│   └── styles/
│       └── globals.css      # UPDATE: Add Inter font, gradients
│
├── tailwind.config.ts       # WILL BE CREATED by shadcn init
├── components.json          # WILL BE CREATED by shadcn init
├── package.json             # UPDATE: remove Chakra, add Tailwind
└── vite.config.ts
```

### Design Tokens (Dream LMS Brand)

**Primary Colors (from Epic 2):**
- **Teal 500:** `#14B8A6` (primary CTA buttons, links, highlights)
- **Cyan 500:** `#06B6D4` (secondary accents, gradients)

**Full Teal Scale (add to tailwind.config.ts):**
```js
teal: {
  50: '#F0FDFA',
  100: '#CCFBF1',
  200: '#99F6E4',
  300: '#5EEAD4',
  400: '#2DD4BF',
  500: '#14B8A6', // PRIMARY
  600: '#0D9488',
  700: '#0F766E',
  800: '#115E59',
  900: '#134E4A',
  950: '#042F2E',
}
```

**Full Cyan Scale (add to tailwind.config.ts):**
```js
cyan: {
  50: '#ECFEFF',
  100: '#CFFAFE',
  200: '#A5F3FC',
  300: '#67E8F9',
  400: '#22D3EE',
  500: '#06B6D4', // SECONDARY
  600: '#0891B2',
  700: '#0E7490',
  800: '#155E75',
  900: '#164E63',
  950: '#083344',
}
```

**Neumorphic Shadows (add to tailwind.config.ts):**
```js
// Epic 2 requires neumorphic design aesthetic
boxShadow: {
  'neuro-sm': '2px 2px 4px rgba(0,0,0,0.2), -2px -2px 4px rgba(255,255,255,0.05)',
  'neuro': '4px 4px 8px rgba(0,0,0,0.2), -4px -4px 8px rgba(255,255,255,0.05)',
  'neuro-lg': '8px 8px 16px rgba(0,0,0,0.2), -8px -8px 16px rgba(255,255,255,0.05)',
}
```

Usage: `<div className="shadow-neuro">` for neumorphic effect.

**Typography:**
- **Font Family:** Inter (Google Fonts)
- **Base Size:** 16px (Tailwind default)
- **Scale:** Tailwind default typographic scale

### Important Notes from Story 2.0

**Custom UI Components (KEEP THESE!):**
Some components in `frontend/src/components/ui/` are already custom-built (not Chakra):
- `button.tsx`, `field.tsx`, `input-group.tsx`, `password-input.tsx`
- `drawer.tsx`, `pagination.tsx`, `menu.tsx`, `dialog.tsx`
- `checkbox.tsx`, `radio.tsx`

**DO NOT replace or remove these!** They're already built and working. Shadcn will add NEW components alongside them.

**Migration Strategy (from Story 2.0):**
This is **Phase 1** of a 3-phase migration:
- **Phase 1 (This Story):** Install Shadcn alongside Chakra (temporary coexistence)
- **Phase 2 (Story 2.2):** Migrate pages one-by-one from Chakra to Shadcn
- **Phase 3 (Story 2.2 end):** Remove Chakra completely after all pages migrated

**Why install alongside Chakra?** Allows incremental page migration without breaking the app.

### Key Technical Decisions

**Shadcn vs Traditional Component Library:**
- Shadcn components are copy-pasted into your codebase (you own the code)
- Built on Radix UI primitives (accessible, unstyled)
- Styled with Tailwind CSS (fully customizable)
- No npm package dependency hell

**Dark Mode Strategy:**
- Use `next-themes` (already installed: v0.4.6)
- Tailwind dark mode via `class` strategy
- Components must work in both light + dark themes

**Tailwind Configuration:**
- Extend default theme (don't replace)
- Add custom colors (Teal, Cyan)
- Add custom shadows (neumorphic)
- Keep Tailwind defaults for spacing, typography, etc.

### Files to Create/Modify

**CREATE:**
- `frontend/tailwind.config.ts` (created by shadcn init)
- `frontend/components.json` (created by shadcn init)
- `frontend/src/lib/design-tokens.ts` (manual creation)
- `frontend/src/components/ui/*` (20+ components via shadcn add)
- `docs/components.md` (documentation)

**MODIFY:**
- `frontend/package.json` (remove Chakra, add Tailwind deps)
- `frontend/src/main.tsx` (remove Chakra provider, add ThemeProvider)
- `frontend/src/styles/globals.css` (add Inter font, gradients)

**DELETE:**
- `frontend/src/theme.tsx` (Chakra theme config)

### Testing

**Testing Standards (from coding-standards.md):**
- Test framework: Playwright (E2E)
- Test location: `frontend/tests/`
- Run tests: `npm run test`

**Testing Requirements for This Story:**
- [ ] Visual check: All Shadcn components render correctly
- [ ] Build succeeds: `npm run build` passes with no errors
- [ ] Dev server runs: `npm run dev` works
- [ ] No console errors in browser
- [ ] Dark mode toggle works (light ↔ dark transition smooth)
- [ ] No Chakra imports remain in codebase

**Validation Commands:**
```bash
# Check no Chakra imports remain
grep -r "@chakra-ui" frontend/src
# Should return: no results

# Verify Shadcn components installed
ls frontend/src/components/ui/
# Should list: 20+ .tsx files

# Build check (MUST succeed)
cd frontend && npm run build

# Run dev server
cd frontend && npm run dev
# Visit http://localhost:5173 and verify:
# - Page loads without errors
# - Dark mode toggle works
# - Components render correctly
```

### Dependencies on Other Stories

**Blocked By:**
- ✅ Story 2.0: Document Chakra Implementation (COMPLETED)
  - Migration guide: `docs/chakra-to-shadcn-migration-guide.md`
  - Quick reference: `docs/chakra-to-tailwind-quick-ref.md`
  - Screenshots: `docs/ss/*.png`

**Blocks:**
- Story 2.2: Migrate Existing Pages (needs Shadcn installed first)
- Story 2.3-2.6: All new UI features (need design system ready)

### Success Criteria

**This story is DONE when:**
1. ✅ Chakra UI completely uninstalled (no @chakra-ui in package.json)
2. ✅ Shadcn + Tailwind fully configured (tailwind.config.ts exists)
3. ✅ Design tokens defined (teal/cyan colors, neumorphic shadows)
4. ✅ 20+ Shadcn components installed in `src/components/ui/`
5. ✅ Dark mode working (theme toggle switches correctly)
6. ✅ Build succeeds with no errors
7. ✅ Documentation created (`docs/components.md`)
8. ✅ NO Chakra imports remain in codebase (`grep` returns nothing)

**Ready for Story 2.2:** Developer can now migrate pages using Shadcn components + migration guide.

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-28 | 1.0 | Initial creation from Epic 2, added Tasks/Dev Notes per PO validation | SM (Bob) |

---

## Dev Agent Record

*This section will be populated by the development agent during implementation.*

### Agent Model Used

*TBD*

### Debug Log References

*TBD*

### Completion Notes

*TBD*

### File List

*TBD - Will include:*
- *Created: tailwind.config.ts, components.json, design-tokens.ts*
- *Modified: package.json, main.tsx, globals.css*
- *Deleted: theme.tsx*
- *Created: 20+ component files in src/components/ui/*

---

## QA Results

*This section will be populated by QA Agent after story implementation is complete.*
